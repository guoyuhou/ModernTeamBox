{% extends 'base.html' %}
{% load static %}

{% block title %}释怀山海民宿 - 让心灵与海洋对话{% endblock %}

{% block content %}
<!-- Hero区域 -->
<section class="hero">
    <div class="hero-content">
        <h1 class="hero-title">释怀山海</h1>
        <p class="hero-subtitle">让心灵与海洋对话，在这里找到属于你的宁静时光</p>
        <p class="hero-description">
            经过一座城，寻觅一间房，消去您满身的疲劳。我们将以热情的服务，舒适的房间，期待您的到来。
        </p>
        <div class="info-bar">
            <div class="info-item">
                <i class="fas fa-calendar-alt"></i>
                <span>开业时间：2016年</span>
            </div>
            <div class="info-item">
                <i class="fas fa-paint-roller"></i>
                <span>装修时间：2019年</span>
            </div>
            <div class="info-item">
                <i class="fas fa-door-open"></i>
                <span>客房数量：8间</span>
            </div>
        </div>
        <a href="#rooms" class="cta-button">探索客房</a>
    </div>
</section>

<!-- 房型展示区域 -->
<section id="rooms" class="room-showcase">
    <h2 class="section-title">精选房型</h2>
    <div class="rooms-grid">
        {% for room in featured_rooms %}
        <div class="room-card">
            <div class="room-image">
                <img src="{{ room.image.url }}" alt="{{ room.name }}">
            </div>
            <div class="room-info">
                <h3 class="room-name">{{ room.name }}</h3>
                <div class="room-price">¥{{ room.price }}/晚</div>
                <p>{{ room.description|truncatewords:20 }}</p>
                <a href="{% url 'main:room_detail' room.pk %}" class="cta-button">立即预订</a>
            </div>
        </div>
        {% endfor %}
    </div>
</section>

<!-- 特色设施区域 -->
<section class="features">
    <h2 class="section-title">酒店特色</h2>
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-water"></i>
            </div>
            <h3 class="feature-title">无敌海景</h3>
            <p>每间房都能欣赏到壮丽的海景，聆听海浪声，感受大海的魅力</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-utensils"></i>
            </div>
            <h3 class="feature-title">特色美食</h3>
            <p>新鲜海鲜，本地特色菜品，让您品尝舌尖上的美味</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-coffee"></i>
            </div>
            <h3 class="feature-title">休闲空间</h3>
            <p>会议室、茶室、露营、烧烤，多样化的休闲方式</p>
        </div>
        <div class="feature-card">
            <div class="feature-icon">
                <i class="fas fa-parking"></i>
            </div>
            <h3 class="feature-title">便利服务</h3>
            <p>免费停车场、全覆盖WiFi、24小时热水</p>
        </div>
    </div>
</section>

<!-- 添加周边景点部分 -->
<section class="attractions">
    <h2 class="section-title">周边景点</h2>
    <div class="attractions-grid">
        <div class="attraction-card">
            <div class="attraction-image">
                <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e" alt="海源公园">
            </div>
            <div class="attraction-info">
                <h3 class="attraction-name">海源公园</h3>
                <div class="attraction-rating">⭐ 4.4</div>
                <div class="attraction-distance">驾车6.7公里</div>
            </div>
        </div>
        <div class="attraction-card">
            <div class="attraction-image">
                <img src="https://images.unsplash.com/photo-1542685295-b280fd4d2c59" alt="猫头山">
            </div>
            <div class="attraction-info">
                <h3 class="attraction-name">猫头山</h3>
                <div class="attraction-rating">⭐ 3.8</div>
                <div class="attraction-distance">驾车2.5公里</div>
            </div>
        </div>
        <div class="attraction-card">
            <div class="attraction-image">
                <img src="https://images.unsplash.com/photo-1582967788606-a171c1080cb0" alt="威海海洋科技馆">
            </div>
            <div class="attraction-info">
                <h3 class="attraction-name">威海海洋科技馆</h3>
                <div class="attraction-rating">⭐ 3.9</div>
                <div class="attraction-distance">驾车4.2公里</div>
            </div>
        </div>
        <div class="attraction-card">
            <div class="attraction-image">
                <img src="https://images.unsplash.com/photo-1507525428034-b723cf961d3e" alt="半月湾沙滩">
            </div>
            <div class="attraction-info">
                <h3 class="attraction-name">半月湾沙滩</h3>
                <div class="attraction-rating">⭐ 4.0</div>
                <div class="attraction-distance">驾车6.1公里</div>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_css %}
<style>
    /* 全局样式 */
    :root {
        --primary-color: #1a4a5e;
        --accent-color: #e67e22;
        --text-light: #ffffff;
        --overlay-dark: rgba(0, 0, 0, 0.4);
        --transition: all 0.3s ease;
    }

    body {
        background: url('https://images.unsplash.com/photo-1582719478250-c89cae4dc85b') no-repeat center center fixed;
        background-size: cover;
        font-family: 'Noto Serif SC', 'PingFang SC', sans-serif;
        color: var(--text-light);
        line-height: 1.6;
    }

    .content-wrapper::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
            to bottom,
            rgba(0, 0, 0, 0.5) 0%,
            rgba(0, 0, 0, 0.3) 50%,
            rgba(0, 0, 0, 0.5) 100%
        );
        z-index: 1;
    }

    /* Hero区域优化 */
    .hero {
        height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        z-index: 2;
    }

    .hero-content {
        text-align: center;
        max-width: 900px;
        padding: 0 20px;
    }

    .hero-title {
        font-size: 4.5rem; /* 减小标题大小 */
        font-weight: 700;
        margin-bottom: 1.5rem;
        letter-spacing: 12px;
        color: #ffffff;
        text-shadow: 2px 2px 15px rgba(0, 0, 0, 0.5);
        animation: fadeInDown 1.5s ease;
    }

    .hero-subtitle {
        font-size: 1.8rem; /* 减小副标题大小 */
        font-weight: 300;
        margin-bottom: 2rem;
        letter-spacing: 3px;
        line-height: 1.8;
        color: #ffffff;
        text-shadow: 1px 1px 10px rgba(0, 0, 0, 0.4);
        animation: fadeInUp 1.5s ease 0.3s backwards;
    }

    .hero-description {
        font-size: 1.1rem; /* 减小描述文字大小 */
        max-width: 800px;
        margin: 0 auto 2.5rem;
        color: #ffffff;
        text-shadow: 1px 1px 8px rgba(0, 0, 0, 0.4);
        opacity: 0;
        animation: fadeIn 1.5s ease 0.6s forwards;
    }

    /* 开业信息展示 */
    .info-bar {
        display: flex;
        justify-content: center;
        gap: 3rem;
        margin-top: 2rem;
        font-size: 1rem; /* 减小信息栏文字大小 */
        opacity: 0;
        animation: fadeIn 1.5s ease 0.9s forwards;
    }

    .info-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: #ffffff;
        text-shadow: 1px 1px 8px rgba(0, 0, 0, 0.4);
    }

    .info-item i {
        color: #ffffff; /* 图标也改为白色 */
        font-size: 1.1rem;
    }

    /* 房型展示区域 */
    .room-showcase {
        padding: 8rem 0;
        position: relative;
        z-index: 2;
    }

    .section-title {
        text-align: center;
        font-size: 3rem;
        margin-bottom: 3rem;
        letter-spacing: 4px;
        color: var(--text-light);
        text-shadow: 2px 2px 10px rgba(0, 0, 0, 0.3);
    }

    .rooms-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr); /* 改为固定3列 */
        gap: 2rem;
        padding: 0 5%;
        margin: 0 auto;
        max-width: 1400px;
    }

    .room-card {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        overflow: hidden;
        transition: transform 0.4s ease;
    }

    .room-card:hover {
        transform: translateY(-10px);
    }

    .room-image {
        height: 250px;
        overflow: hidden;
    }

    .room-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s ease;
    }

    .room-card:hover .room-image img {
        transform: scale(1.1);
    }

    .room-info {
        padding: 2rem;
        color: var(--text-light);
    }

    .room-name {
        font-size: 1.8rem;
        margin-bottom: 1rem;
    }

    .room-price {
        font-size: 1.4rem;
        color: var(--accent-color);
        margin-bottom: 1rem;
    }

    /* 特色设施区域 */
    .features {
        padding: 8rem 0;
        position: relative;
        z-index: 2;
        background: rgba(0, 0, 0, 0.3);
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr); /* 强制4列 */
        gap: 2rem;
        padding: 0 5%;
        margin: 0 auto;
        max-width: 1400px;
    }

    .feature-card {
        text-align: center;
        padding: 3rem 2rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        transition: var(--transition);
        color: var(--text-light);
    }

    .feature-card:hover {
        transform: translateY(-8px);
        background: rgba(0, 0, 0, 0.2);
    }

    .feature-icon {
        font-size: 3rem;
        margin-bottom: 1.5rem;
        color: var(--accent-color);
    }

    .feature-title {
        font-size: 1.8rem;
        margin-bottom: 1rem;
        color: var(--text-light);
    }

    /* 按钮样式 */
    .cta-button {
        display: inline-block;
        padding: 1.2rem 3.5rem;
        background: var(--accent-color);
        color: var(--text-light);
        border-radius: 50px;
        text-decoration: none;
        font-size: 1.2rem;
        letter-spacing: 2px;
        transition: var(--transition);
        border: none;
    }

    .cta-button:hover {
        background: #d35400;
        transform: translateY(-3px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    /* 响应式优化 */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 3.5rem;
        }

        .hero-subtitle {
            font-size: 1.5rem;
        }

        .hero-description {
            font-size: 1rem;
        }

        .info-bar {
            flex-direction: column;
            gap: 1rem;
            align-items: center;
        }
    }

    /* 添加周边景点样式 */
    .attractions {
        padding: 8rem 0;
        position: relative;
        z-index: 2;
    }

    .attractions-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 2rem;
        padding: 0 5%;
        margin: 0 auto;
        max-width: 1400px;
    }

    .attraction-card {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 15px;
        overflow: hidden;
        transition: var(--transition);
    }

    .attraction-card:hover {
        transform: translateY(-10px);
    }

    .attraction-image {
        height: 200px;
        overflow: hidden;
    }

    .attraction-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s ease;
    }

    .attraction-card:hover .attraction-image img {
        transform: scale(1.1);
    }

    .attraction-info {
        padding: 1.5rem;
        color: white;
    }

    .attraction-name {
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
    }

    .attraction-rating {
        color: #ffd700;
        margin-bottom: 0.5rem;
    }

    .attraction-distance {
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.8);
    }

    @media (max-width: 1200px) {
        .features-grid,
        .attractions-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .features-grid,
        .attractions-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // 平滑滚动优化
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

        // 视差滚动效果
        const parallaxElements = document.querySelectorAll('.parallax');
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            parallaxElements.forEach(el => {
                const speed = el.dataset.speed || 0.5;
                const yPos = -(scrolled * speed);
                el.style.transform = `translate3d(0, ${yPos}px, 0)`;
            });
        });

        // 动态模糊效果优化
        let lastScrollTop = 0;
        const wrapper = document.querySelector('.content-wrapper');
        window.addEventListener('scroll', () => {
            const st = window.pageYOffset;
            const delta = Math.abs(st - lastScrollTop);
            const blur = Math.min(delta / 100, 20);
            
            wrapper.style.backdropFilter = `blur(${10 + blur}px)`;
            lastScrollTop = st;
        }, {
            passive: true
        });

        // 添加渐入动画
        const observerOptions = {
            threshold: 0.2,
            rootMargin: '50px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('fade-in-up');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.room-card, .feature-card').forEach(el => {
            observer.observe(el);
        });

        // 轮播图逻辑优化
        function initCarousel() {
            const carousel = document.querySelector('.room-carousel');
            const items = carousel.querySelectorAll('.carousel-item');
            const prevBtn = document.querySelector('.prev-btn');
            const nextBtn = document.querySelector('.next-btn');
            let currentIndex = 0;

            function showSlide(index) {
                items.forEach(item => item.classList.remove('active'));
                items[index].classList.add('active');
            }

            function nextSlide() {
                currentIndex = (currentIndex + 1) % items.length;
                showSlide(currentIndex);
            }

            function prevSlide() {
                currentIndex = (currentIndex - 1 + items.length) % items.length;
                showSlide(currentIndex);
            }

            nextBtn.addEventListener('click', nextSlide);
            prevBtn.addEventListener('click', prevSlide);

            setInterval(nextSlide, 5000);
        }

        initCarousel();

        // 客户评价轮播
        const testimonialCarousel = document.querySelector('.testimonial-carousel');
        let isDown = false;
        let startX;
        let scrollLeft;

        testimonialCarousel.addEventListener('mousedown', (e) => {
            isDown = true;
            startX = e.pageX - testimonialCarousel.offsetLeft;
            scrollLeft = testimonialCarousel.scrollLeft;
        });

        testimonialCarousel.addEventListener('mouseleave', () => {
            isDown = false;
        });

        testimonialCarousel.addEventListener('mouseup', () => {
            isDown = false;
        });

        testimonialCarousel.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - testimonialCarousel.offsetLeft;
            const walk = (x - startX) * 2;
            testimonialCarousel.scrollLeft = scrollLeft - walk;
        });

        // 高德地图初始化
        function initMap() {
            const map = new AMap.Map('map', {
                zoom: 15,
                center: [122.123456, 37.123456] // 替换为实际坐标
            });

            const marker = new AMap.Marker({
                position: [122.123456, 37.123456],
                title: '释怀山海民宿'
            });

            map.add(marker);
        }

        document.addEventListener('DOMContentLoaded', function() {
            initMap();
        });
    });
</script>
<!-- 引入高德地图 API -->
<script src="https://webapi.amap.com/maps?v=2.0&key=您的高德地图KEY"></script>
{% endblock %}

